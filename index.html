<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ежедневник</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background-color: #e0f7ff;
    color: black;
    transition: background-color 0.5s, color 0.5s;
}

.site-header {
    background: linear-gradient(135deg, #1e88e5, #4fc3f7);
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    position: sticky;
    top: 0;
    z-index: 1000;
}

.header-content {
    max-width: 1200px;
    margin: auto;
}

.logo {
    text-align: center;
    font-size: 40px;
    font-weight: bold;
    color: white;
    margin-bottom: 10px;
}

.header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.contacts {
    display: flex;
    gap: 20px;
    font-size: 18px;
    color: white;
    flex-wrap: wrap;
}

.weather-btn {
    background: rgba(255,255,255,0.25);
    backdrop-filter: blur(8px);
    color: white;
    padding: 10px 22px;
    border-radius: 30px;
    font-size: 16px;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid rgba(255,255,255,0.3);
}

.weather-btn:hover {
    background: #0e1ed6;
    transform: translateY(-2px);
}

.title {
    text-align: center;
    padding: 20px 0;
    color: rgb(18, 122, 201);
}

.weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    background: #4fc3f7;
    color: white;
    text-align: center;
    font-weight: bold;
    padding: 10px 0;
    border-radius: 15px;
    margin: 0 10px;
    gap: 5px;
}

.calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    padding: 10px;
}

.day {
    background: #b3e0ff;
    border-radius: 5px;
    min-height: 120px;
    padding: 10px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    color: rgb(18, 122, 201);
}

.day:hover {
    background: #4fc3f7;
    color: white;
}

.day-number {
    position: absolute;
    top: 5px;
    right: 5px;
    font-weight: bold;
}

.preview {
    margin-top: 30px;
    font-size: 14px;
    text-align: center;
}

.preview span {
    display: block;
    background: #3399ff;
    color: white;
    padding: 3px 6px;
    border-radius: 6px;
    margin-bottom: 4px;
}

.day.active {
    position: fixed;
    inset: 0;
    margin: auto;
    width: 360px;
    height: 400px;
    background: #b3e0ff;
    color: rgb(18, 122, 201);
    z-index: 999;
    box-shadow: 0 0 30px rgba(0,0,0,0.5);
    cursor: default;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding:20px;
}

.day-content h3 {
    text-align: center;
}

input, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

button {
    padding: 10px 22px;
    font-size: 16px;
    background: #006994;
    color: white;
    border-radius: 30px;
    cursor: pointer;
    border: none;
    margin-top: 8px;
    transition: all 0.3s ease;
}

button:hover {
    background: #004f70;
}

.buttons {
    display: flex;
    gap: 10px; 
}

.note {
    background: #4fc3f7;
    border-radius: 10px;
    padding: 8px;
    margin-top: 8px;
    color: white;
}

.dark {
    background-color: #111;
    color: white;
}

.dark .day {
    background: #1e3c50;
    color: white;
}

.dark .day:hover {
    background: #4fc3f7;
    color: white;
}

.dark .weekdays {
    background: #2b4f6d;
}

.box {
    text-align: center;
    padding: 20px;
}
</style>
</head>
<body>

<header class="site-header">
    <div class="header-content">
        <div class="logo">Ежедневка</div>

        <div class="header-row">
            <div class="contacts">
                <span>050 993 48 97</span>
                <span>email@mail.com</span>
                <span>Instagram</span>
            </div>
            <div class="buttons">
            <a href="game.html" class="weather-btn">Игра</a>
            <a href="weather.html" class="weather-btn">Погода</a>
            </div>
        </div>
    </div>
</header>

<div class="title">
    <h1>Ежедневник на месяц</h1>
    <h2>Декабрь 2025 года</h2>
</div>

<div class="weekdays">
    <div>Понедельник</div>
    <div>Вторник</div>
    <div>Среда</div>
    <div>Четверг</div>
    <div>Пятница</div>
    <div>Суббота</div>
    <div>Воскресенье</div>
</div>

<div class="calendar" id="calendar"></div>

<div class="box">
    <button id="themeBtn">Сменить на черный фон</button>
</div>

<script>
const calendar = document.getElementById("calendar");
let notes = JSON.parse(localStorage.getItem("notes")) || {};
let activeDay = null;

for (let i = 1; i <= 30; i++) {
    const d = document.createElement("div");
    d.className = "day";
    d.dataset.day = i;
    renderDay(d);
    d.onclick = () => toggleDay(d);
    calendar.appendChild(d);
}

function renderDay(day) {
    const n = day.dataset.day;
    day.innerHTML = `<div class="day-number">${n}</div>`;
    const prev = document.createElement("div");
    prev.className = "preview";
    (notes[n] || []).slice(0,3).forEach(t => {
        const s = document.createElement("span");
        s.textContent = t;
        prev.appendChild(s);
    });
    day.appendChild(prev);
}

function toggleDay(day) {
    if (activeDay && activeDay !== day) closeDay(activeDay);
    day.classList.contains("active") ? closeDay(day) : openDay(day);
}

function openDay(day) {
    const n = day.dataset.day;
    notes[n] ||= [];
    activeDay = day;
    day.classList.add("active");

    day.innerHTML = `
    <div class="day-content" onclick="event.stopPropagation()">
        <h3>День ${n}</h3>
        <input id="newNote" placeholder="Новая заметка">
        <button onclick="addNote()">Сохранить заметку</button>
        <div id="notesList"></div>
        <button onclick="closeDay(activeDay)">Закрыть</button>
    </div>`;
    updateNotes();
}

function closeDay(day) {
    day.classList.remove("active");
    activeDay = null;
    renderDay(day);
}

function addNote() {
    const input = document.getElementById("newNote");
    if (!input.value.trim()) return;
    notes[activeDay.dataset.day].push(input.value.trim());
    input.value = "";
    save();
    updateNotes();
}

function updateNotes() {
    const n = activeDay.dataset.day;
    const list = document.getElementById("notesList");
    list.innerHTML = "";

    notes[n].forEach((text, i) => {
        const div = document.createElement("div");
        div.className = "note";
        div.innerHTML = `
            <div>${text}</div>
            <button onclick="editNote(${i})">Редактировать</button>
            <button onclick="deleteNote(${i})">Удалить</button>
        `;
        list.appendChild(div);
    });
}

function editNote(index) {
    const n = activeDay.dataset.day;
    const list = document.getElementById("notesList");
    const div = list.children[index];
    div.innerHTML = `
        <textarea>${notes[n][index]}</textarea>
        <button onclick="saveEdit(${index})">Сохранить</button>
        <button onclick="updateNotes()">Отмена</button>
    `;
}

function saveEdit(index) {
    const n = activeDay.dataset.day;
    const textarea = document.querySelector("#notesList textarea");
    notes[n][index] = textarea.value;
    save();
    updateNotes();
}

function deleteNote(index) {
    const n = activeDay.dataset.day;
    notes[n].splice(index, 1);
    save();
    updateNotes();
}

function save() {
    localStorage.setItem("notes", JSON.stringify(notes));
}

document.getElementById("themeBtn").onclick = () => {
    document.body.classList.toggle("dark");
    const btn = document.getElementById("themeBtn");
    if(document.body.classList.contains("dark")) {
        btn.textContent = "Сменить на белый фон";
    } else {
        btn.textContent = "Сменить на черный фон";
    }
};
</script>

</body>
</html>
