<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ежедневник</title>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: white;
            color: black;
            transition: background-color 0.5s, color 0.5s;
        }

        .box {
            text-align: center;
            padding: 20px 0;
        }

        .a {
            text-align: center;
            padding: 20px 0;
        }

        button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            background-color: #a43838;
            color: white;
            border-radius: 5px;
            margin-bottom: 10px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #9b3333;
        }

        .day2 {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background: #9a9494;
            text-align: center;
            font-weight: bold;
            padding: 10px 0;
        }

        .day2 div {
            padding: 10px 0;
            border: 1px solid #ccc;
            background: #f2f2f2;
        }

        .day {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-template-rows: repeat(6, 120px);
            gap: 0;
            padding: 0 5px;
        }

        .day1 {
            position: relative;
            border: 1px solid #ccc;
            background: #fff;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            transition: all 0.3s ease;
            z-index: 1;
        }

        .day1::before {
            content: attr(data-day);
            position: absolute;
            top: 5px;
            right: 5px;
            font-weight: bold;
            font-size: 16px;
        }

        .day1.active {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 330px;
            height: 400px;
            transform: translate(-50%, -50%);
            font-size: 18px;
            z-index: 100;
            background: #fff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            border-radius: 10px;
            padding: 10px;
        }

        .day1.active::before {
            display: none;
        }

        .note-delete-btn {
            padding: 5px 8px;
            font-size: 12px;
            margin-left: 10px;
            background-color: #a43838;
            border-radius: 3px;
            color: white;
            cursor: pointer;
        }

        #notesList li {
            list-style: none;
            margin-bottom: 8px;
        }

        #noteInput {
            margin-bottom: 15px; 
        }
    </style>

</head>
<body>

<div class="a">
    <h1>Ежедневник на месяц</h1>
    <h2>Ноябрь 2025 года</h2>
</div>

<div class="day2">
    <div>Понедельник</div>
    <div>Вторник</div>
    <div>Среда</div>
    <div>Четверг</div>
    <div>Пятница</div>
    <div>Суббота</div>
    <div>Воскресенье</div>
</div>

<div class="day">
    <script>
        for (let i = 1; i <= 30; i++) {
            document.write(`<div class="day1" data-day="${i}"></div>`);
        }
    </script>
</div>

<div class="box">
    <button id="toggleBtn">Сменить на черный фон</button>
</div>

<script>

    const days = document.querySelectorAll('.day1');
    let activeDay = null;

    let notes = {};

    days.forEach(day => {
        renderDayContent(day);

        day.addEventListener('click', (e) => {
            if (e.target.tagName === "INPUT") return;
            if (e.target.tagName === "BUTTON") return;

            if (activeDay && activeDay !== day) {
                closeDay(activeDay);
            }

            if (day.classList.contains('active')) {
                closeDay(day);
            } else {
                openDay(day);
            }
        });
    });

    function renderDayContent(day) {
        const num = day.getAttribute("data-day");
        day.innerHTML = `<span style="position:absolute; top:5px; right:5px; font-weight:bold;">${num}</span>`;
    }

    function closeDay(day) {
        day.classList.remove("active");
        day.innerHTML = "";
        renderDayContent(day);
        activeDay = null;
    }

    function openDay(day) {
        const n = day.getAttribute("data-day");
        if (!notes[n]) notes[n] = [];

        day.classList.add("active");
        activeDay = day;

        day.innerHTML = `
            <div id="dayContent" style="width:100%; height:100%;">
                <h2 style="text-align:center; margin-top:5px;">День ${n}</h2>

                <button id="closeBtn" style="width:92%; margin-left:10px; background:#444;">
                    Закрыть
                </button>

                <input id="noteInput" placeholder="Новая заметка..."
                    style="padding:10px; width:90%; font-size:16px; margin-left:10px; margin-top:10px; margin-bottom:5px;">

                <button id="addNoteBtn" style="width:92%; margin-left:10px;">
                    Добавить
                </button>

                <ul id="notesList" style="
                    margin-top:10px;
                    max-height:200px;
                    overflow-y:auto;
                    padding-left:20px;
                "></ul>
            </div>
        `;

        day.querySelector("#closeBtn").onclick = () => closeDay(day);
        updateNotesList(day);

        day.querySelector("#addNoteBtn").onclick = () => addNote(day);
    }

    function addNote(day) {
        const n = day.getAttribute("data-day");
        const input = day.querySelector("#noteInput");

        if (input.value.trim() === "") return;

        notes[n].push({ text: input.value.trim(), done: false });
        input.value = "";
        updateNotesList(day);
    }

    function toggleCheckbox(day, index) {
        const n = day.getAttribute("data-day");
        notes[n][index].done = !notes[n][index].done;
    }

    function deleteNote(day, index) {
        const n = day.getAttribute("data-day");
        notes[n].splice(index, 1);
        updateNotesList(day);
    }

    function updateNotesList(day) {
        const n = day.getAttribute("data-day");
        const list = day.querySelector("#notesList");
        list.innerHTML = "";

        notes[n].forEach((note, i) => {
            const li = document.createElement("li");

            li.innerHTML = `
                <input type="checkbox" ${note.done ? "checked" : ""} onclick="event.stopPropagation(); toggleCheckbox(activeDay, ${i})">
                ${note.text}
                <button class="note-delete-btn" onclick="event.stopPropagation(); deleteNote(activeDay, ${i})">
                    Удалить
                </button>
            `;

            list.appendChild(li);
        });
    }

    const button = document.getElementById('toggleBtn');
    let isWhite = true;

    button.addEventListener('click', () => {
        if (isWhite) {
            document.body.style.backgroundColor = 'black';
            document.body.style.color = 'white';

            document.querySelectorAll('.day1').forEach(d => {
                d.style.backgroundColor = '#333';
                d.style.color = 'white';
            });

            document.querySelectorAll('.day2, .day2 div').forEach(d => {
                d.style.backgroundColor = '#555';
                d.style.color = 'white';
            });

            button.textContent = 'Сменить на белый фон';
        } else {
            document.body.style.backgroundColor = 'white';
            document.body.style.color = 'black';

            document.querySelectorAll('.day1').forEach(d => {
                d.style.backgroundColor = 'white';
                d.style.color = 'black';
            });

            document.querySelectorAll('.day2, .day2 div').forEach(d => {
                d.style.backgroundColor = '#f2f2f2';
                d.style.color = 'black';
            });

            button.textContent = 'Сменить на черный фон';
        }

        isWhite = !isWhite;
    });
</script>

</body>
</html>
